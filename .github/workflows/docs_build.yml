name: Build Documentation
on:
  push:
#    tags:
#      - '\d+.\d+.\d+'
    branches: [feature/ISY-998-Analyse_Sichtbarkeit_der_Doku_Warnungen]

jobs:
  TriggerBuild:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger documentation build
        uses: codex-/return-dispatch@v1.12.0
        id: trigger_build
        with:
          token: ${{ secrets.ANTORA_TRIGGER_TOKEN }}
          ref: refs/heads/feature/ISY-998-Analyse_Sichtbarkeit_der_Doku_Warnungen
          repo: isyfact.github.io
          owner: IsyFact
          workflow: antora_build.yml

      - name: Await Run ID ${{ steps.trigger_build.outputs.run_id }}
        uses: codex-/await-remote-run@v1.11.0
        with:
          token: ${{ secrets.ANTORA_TRIGGER_TOKEN }}
          repo: isyfact.github.io
          owner: IsyFact
          run_id: ${{ steps.trigger_build.outputs.run_id }}
          run_timeout_seconds: 300 # Optional
          poll_interval_ms: 5000 # Optional
name: Build Documentation
on:
  push:
    tags:
      - '\d+.\d+.\d+'

jobs:
  TriggerBuild:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger documentation build
        uses: codex-/return-dispatch@v1.12.0
        id: trigger_build
        with:
          token: ${{ secrets.ANTORA_TRIGGER_TOKEN }}
          ref: main
          repo: isyfact.github.io
          owner: IsyFact
          workflow: antora_build.yml

      - name: Wait for documentation build completion (Run ID - ${{ steps.trigger_build.outputs.run_id }})
        uses: codex-/await-remote-run@v1.11.0
        with:
          token: ${{ secrets.ANTORA_TRIGGER_TOKEN }}
          repo: isyfact.github.io
          owner: IsyFact
          run_id: ${{ steps.trigger_build.outputs.run_id }}
          run_timeout_seconds: 300 # 5 minutes (optional)
          poll_interval_ms: 5000 # 5 seconds (optional)
= Handbuch f√ºr technische Autoren: Inhalt

// tag::inhalt[]
[[aufbau-der-dokumentation]]
== Architektur der Dokumentation

Die Architektur der IsyFact-Dokumentation besteht aus zwei Kernbestandteilen:

. Zentrale Dokumentation (bis IsyFact 2.4.x isy-documentation, ab IsyFact 2.5.0 isyfact-standards-doc)
. Bausteindokumentation

Die zentrale Dokumentation wurde ab IsyFact 2.5.0 verschoben in das Repository isyfact-standards im Zuge der Migration der Dokumentation zum Code.

// tag::important[]
[IMPORTANT]
====
Die Dokumentation in isy-documentation wird mit Hilfe der AsciidoctorJ Extensions als PDF- und HTML generiert.
Dieses Handbuch beschreibt die Generierung und die Vorbereitung daf√ºr.
Wenn die Generierung von PDF unverzichtbar ist, muss die Dokumentation per AsciidoctorJ Extensions erstellt werden.
====

// end::important[]

// tag::important[]
[IMPORTANT]
====
Die Dokumentation in isyfact-standards-doc wird mit Hilfe von Antora als HTML generiert.
Eine andere Version des Handbuchs beschreibt die Generierung und Vorbereitung daf√ºr.
Es wird empfohlen, f√ºr die Dokumentengenerierung Antora zu verwenden.
====

// end::important[]

Im Folgenden werden die Bestandteile erl√§utert.


[[zentrale-dokumentation]]
=== Zentrale Dokumentation

Die zentrale Dokumentation bietet Informationen, Nutzungsvorgaben und Anleitungen zu zentralen Themen der IsyFact.
Dazu z√§hlt der Einstieg, das Whitepaper oder auch das Tutorial.

[[baustein-dokumentation]]
=== Bausteindokumentation

Jeder Baustein der IsyFact enth√§lt eine eigene Dokumentation.
Hierzu geh√∂ren die Nutzungsvorgaben zur Verwendung des Bausteins und das zugrundeliegende Konzept.
Die Nutzungsvorgaben richten sich in erster Linie an Entwickler, die die IsyFact nutzen.
Das Konzept richtet sich an Architekten und Entwickler, die die IsyFact weiterentwickeln.
Wird ein neuer Baustein angelegt, so muss auch eine entsprechende Dokumentation erstellt werden.
Die Dokumentation des Bausteins ist als Verzeichnis mit Asciidoc-Dateien im Baustein immer unter `src/docs` abgelegt.

[[die-arbeitsumgebung-einrichten]]
== Die Arbeitsumgebung einrichten

[[git-installieren]]
=== Git installieren

Git wird von der Webseite xref:glossary:literaturextern:inhalt.adoc#litextern-Git[Git] heruntergeladen.

.Webseite des Versionierungssystems Git
[id="image-git1",reftext="{figure-caption} {counter:figures}"]
image::handbuch/git1.png[align="center",pdfwidth=80%,width=80%]

Weil das Git-Repository auf einem Unix-basierten Betriebssystem installiert ist, technische Autoren aber eventuell auf einem Windows-Betriebssystem arbeiten, besteht eine Diskrepanz bei den Zeilenumbr√ºchen.
Denn w√§hrend Windows die Zeichen Carriage-Return (`'\r'`) und New-Line (`'\n'`) einsetzt, um das Zeilenende anzuzeigen, verwendet Unix lediglich ein New-Line (`'\n'`).
Um dieses Problem zu l√∂sen, wird bei der Installation von Git folgendes Fenster mit drei Optionen angeboten.

.Optionen zur Behandlung von Zeilenumbr√ºchen
[id="image-git2",reftext="{figure-caption} {counter:figures}"]
image::handbuch/git2.png[align="center"]

Bei der ersten Option geht Git genau von der Konstellation aus, die auch bei der IsyFact-Dokumentation gebraucht wird.
Denn mit dieser Option √§ndert Git die heruntergeladenen Zeilenumbr√ºche zur Windows-Variante um.
Beim Hochladen wird hingegen zur Unix-Variante zur√ºckgewandelt.
Sollten Sie lokal mit Windows arbeiten, selektieren Sie also die erste Option.

[[git-lfs-installieren]]
=== Git LFS installieren

Zur Ablage gro√üer Dateien, wie z.B. Bildern, wird in einigen Repositories Git Large File Storage (LFS) verwendet.
Dabei werden die gro√üen Dateien durch sehr kleine sogenannte "pointer files" ersetzt, die auf die echten Dateien verweisen.
Damit das funktioniert muss auch client-seitig Git LFS installiert sein.
Die Installation geht sehr einfach in wenigen Schritten und ist f√ºr Linux, Windows und Mac hier beschrieben: xref:glossary:literaturextern:inhalt.adoc#litextern-Git-LFS[Git LFS]

[[vsc-installieren]]
=== VS Code installieren

Die Installationsdatei von VS Code kann von xref:glossary:literaturextern:inhalt.adoc#litextern-VisualStudio[Visual Studio] heruntergeladen werden.
Alternativ kann auch ein anderer Texteditor verwendet werden, der AsciiDoc unterst√ºtzt, wie z.B. xref:glossary:literaturextern:inhalt.adoc#litextern-Atom[Atom] oder xref:glossary:literaturextern:inhalt.adoc#litextern-IntelliJ[IntelliJ].

Im Folgenden wird die Installation, Konfiguration und Nutzung von VS Code beschrieben.

.Webseite des Texteditors VS Code
[id="image-vs_code",reftext="{figure-caption} {counter:figures}"]
image::handbuch/vs_code.png[align="center",pdfwidth=80%,width=80%]

Nach der Installation wird noch ein Plugin ben√∂tigt, um AsciiDoc-Dateien in Echtzeit im Texteditor zu rendern und eine Vorschau zu erzeugen.
Dazu VS Code starten und links am Rand des Editor auf den Men√ºpunkt f√ºr `Extensions` klicken (siehe  <<image-vs_code_plugin_suche>>).
Alternativ kann auch die Tastenkombination kbd:[Strg+Shift+X] gedr√ºckt werden.
Anschlie√üend in das Suchfeld "AsciiDoc" eingeben, um passende AsciiDoc-Plugins anzeigen zu lassen.

.Auswahl des AsciiDoc-Plugins
[id="image-vs_code_plugin_suche",reftext="{figure-caption} {counter:figures}"]
image::handbuch/vs_code_plugin1.png[align="center",pdfwidth=80%,width=80%]

Die Suche wird automatisch gestartet und listet zahlreiche AsciiDoc-Plugins auf.
Wir nutzen das Plugin `AsciiDoc` von Jo√£o Pinto, da dies den gr√∂√üten Funktionsumfang bietet.
F√ºr die Installation das Plugin in der Ergebnisliste ausw√§hlen und in der sich √∂ffnenden Plugin-Beschreibung auf den Button `install` klicken (siehe <<image-vs_code_plugin_installation>>).
Das Plugin wird nun installiert.

.Installation des AsciiDoc-Plugins
[id="image-vs_code_plugin_installation",reftext="{figure-caption} {counter:figures}"]
image::handbuch/vs_code_plugin2.png[align="center",pdfwidth=80%,width=80%]

Nach der Installation wieder in den Explorer-Modus (siehe <<image-vs_code_plugin_explorer>>) wechseln.

.Wechsel in den Explorer-Modus
[id="image-vs_code_plugin_explorer",reftext="{figure-caption} {counter:figures}"]
image::handbuch/vs_code_plugin3.png[align="center",pdfwidth=80%,width=80%]

In xref::handbuch_dokumentation/inhalt.adoc#vsc-einsetzen[VS Code einsetzen] wird die Nutzung von VS Code erl√§utert.

[[maven-installieren]]
=== Maven installieren

Zum Erzeugen der PDF- und HTML-Dokumente wird Apache Maven ben√∂tigt.
Apache Maven kann unter xref:glossary:literaturextern:inhalt.adoc#litextern-Maven[Maven] heruntergeladen werden.
Das heruntergeladene Archiv muss in ein beliebiges Verzeichnis entpackt werden.

Anschlie√üend gilt es noch die Pfad-Variable zu setzen:



*Windows*

Dazu in das Suchfeld im Startmen√º `Systemumgebungsvariablen` eingeben und den Treffer `Systemumgebungsvariablen ausw√§hlen`.
Anschlie√üend im sich √∂ffnenden Fenster unten rechts auf `Umgebungsvariablen` klicken.
Es √∂ffnet sich ein neues Fenster.
Unter `Benutzervariablen f√ºr [nutzer]` den Eintrag `PATH` ausw√§hlen und auf den Button `Bearbeiten` klicken.
Im sich √∂ffnenden Fenster einen neuen Eintrag anlegen und den Pfad zum entpackten Maven Verzeichnis inkl `bin` angeben.
Beispiel: `C:\maven\bin`

Anschlie√üend die Konsole neu starten und den Befehl `mvn -v` eingeben. Nun sollte die installierte Maven-Version angegeben werden.


*Linux*

In der Konsole den Pfad mit folgendem Befehl setzen:
[source,shell]
----
export PATH=/opt/apache-maven-3.6.2/bin:$PATH+
----
`/opt/apache-maven-3.6.2/bin` gibt den lokalen Pfad zum entpackten Maven-Verzeichnis an.

[[ein-neues-dokument-anlegen]]
== Ein neues Dokument anlegen

In diesem Kapitel wird jeweils f√ºr die <<zentrale-dokumentation>>, als auch f√ºr die <<baustein-dokumentation>> gezeigt, wie die erforderliche Verzeichnisstruktur aussieht und wie ein neues Dokument dort einsortiert wird.

[[neues-verzeichnis-zentrale-dokumentation-anlegen]]
=== Zentrale Dokumentation: Ein neues Verzeichnis anlegen

Die zentrale Dokumentation hat im Vergleich zur Bausteindokumentation eine erweiterte Verzeichnisstruktur.
Die zentrale Dokumentation der IsyFact-Standards gliedert sich nach den S√§ulen der IsyFact.

Allgemein;; Einstiegsdokumente, Tutorial, Konventionen
Blaupausen;; Grundlagendokumente und Detailkonzepte f√ºr Architektur und Anwendungslandschaft
Bausteine;; Dokumente f√ºr die jeweilig wiederverwendbaren Softwarel√∂sungen
Methodik;; Methodische Dokumente bspw. zu Programmierkonventionen und Systemhandbuch und -entwurf
Werkzeuge;; Dokumente zur Verwendung von Werkzeugen und der Einrichtung der Entwicklungsumgebung (hierzu geh√∂rt auch dieses Dokument)

Ein neues IsyFact-Dokument muss unterhalb einer geeigneten S√§ule abgelegt werden.
Dazu wird unterhalb des Verzeichnisses, das die S√§ule repr√§sentiert, ein neues Verzeichnis
angelegt, dessen Name den Inhalt des Dokuments widerspiegelt.


[[neues-verzeichnis-bausteindokumentation-anlegen]]
=== Bausteindokumentation: Ein neues Verzeichnis anlegen

Soll f√ºr einen Baustein eine neue Dokumentation angelegt werden oder die bestehende Dokumentation um ein Dokument erweitert werden, so muss zun√§chst der geeignete Ort zur Ablage bestimmt werden.
I.d.R. ist dies das Repository, in dem sich der Baustein befindet, da die Dokumentation nah beim Code abgelegt werden soll.
Bis zur IsyFact 2.4.x befindet sich jedoch ein gro√üer Teil der Bausteindokumentation im Repository isy-documentation.

Ab IsyFact 2.5.0 liegt dieser Teil der Bausteindokumentation im Repository isyfact-standards im Submodul isyfact-standards-doc.
Der Code dieser Bausteine befindet sich ebenfalls im Repository isyfact-standards, wodurch die Architekturregel "Dokumentation nah beim Code" erf√ºllt ist.

Zun√§chst muss der Baustein vom Git-Repository heruntergeladen werden.
Hierf√ºr muss auf der Kommandozeile auf eine geeignete Stelle der lokalen Festplatte gewechselt werden und folgendes Kommando eingegeben werden.

====
C:\tmp\> *git clone* https://github.com/IsyFact/<Repository>

z.B. C:\tmp\> *git clone* https://github.com/IsyFact/isy-baustein
====

Bei <Repository> kann es sich um einen einzelnen Baustein handeln oder um ein Repository mit zentraler Dokumentation wie isy-documentation (bis IsyFact 2.4.x) oder isyfact-standards (ab IsyFact 2.5.0).

In einem Baustein wird die Dokumentation in einem eigenen Maven-Submodul unter dem Pfad `src/docs` abgelegt.

<<verzeichnisstruktur-baustein>> zeigt die Verzeichnisstruktur f√ºr die Dokumentation des fiktiven Bausteins `isy-baustein` zusammen mit den Asciidoc-Dateien f√ºr ein Dokument.

[[verzeichnisstruktur-baustein]]
.Verzeichnisse der Bausteindokumentation
----
üìÇ isy-baustein
  üìÇ isy-baustein-doc <1>
    üìÇ src
        üìÇ docs
            üìÇ Konzept <2>
                üìÑ anhaenge.adoc  <3>
                üìÑ inhalt.adoc    <4>
                üìÑ master.adoc    <5>
                üìÑ thisdoc.adoc   <6>
                üìÇ images <4>
            üìÇ Nutzungsvorgaben <2>
                üìÑ anhaenge.adoc
                üìÑ inhalt.adoc
                üìÑ master.adoc
                üìÑ thisdoc.adoc
                üìÇ images
----
<1> Maven-Submodul f√ºr die Dokumentation.
<2> Jeweils ein Dokument; bei Bausteinen findet sich h√§ufig die Unterteilung in Konzept und Nutzungsvorgaben.
<3> Auflistung der Anh√§nge des IsyFact-Dokuments.
<4> Inhalte des IsyFact-Dokuments.
<5> Zentrale Datei, die alle anderen Dateien √ºber spezielle Verweise (`include`) einbindet.
Eine vollst√§ndige Vorschau des IsyFact-Dokuments wird angezeigt, wenn die Datei `master.adoc` im Editor ge√∂ffnet und die Vorschaufunktion verwendet wird.
<6> Einleitendes Kapitel des IsyFact-Dokuments, das den Inhalt zusammenfasst sowie den Aufbau und Zweck des Dokuments erl√§utert.
<7> Bilder und Grafiken, die im neu zu erstellenden Dokument verwendet werden sollen.


[[vsc-einsetzen]]
=== VS Code einsetzen

F√ºr die Bearbeitung der Dokumente √∂ffnen Sie VS Code √ºber das Startmen√º.
Innerhalb von VS Code √∂ffnen Sie im Hauptmen√º unter menu:File[Open Folder] das neu erstellte oder ein bestehendes Verzeichnis.
Hierdurch √∂ffnen Sie den Ordner Ihres IsyFact-Dokuments als VS Code Projekt.

.Den Ordner des IsyFact-Dokuments √∂ffnen
[id="image-vs_code_projekt_oeffnen",reftext="{figure-caption} {counter:figures}"]
image::handbuch/vs_code_projekt_oeffnen.png[align="center"]

Auf der linken Seite erscheint die Projektansicht mit dem Verzeichnis Ihres IsyFact-Dokuments.

Sie k√∂nnen sich nun bereits das Dokument in der Vorschau ansehen.
Hierf√ºr √∂ffnen Sie zun√§chst die zentrale Datei `master.adoc`.
Dann dr√ºcken Sie entweder kbd:[Strg + K] und anschlie√üend kbd:[V] oder Sie klicken in der oberen rechten Ecke des Editors auf das Symbol mit der blauen Lupe.
Dabei sollte auf der rechten Seite die Vorschau erscheinen.

Die Vorschau dient lediglich einer groben Orientierung, da weder die Isyfact-Stylesheets f√ºr die Dokumente genutzt werden, noch die Skripte zur Erzeugung von Glossar, Inhaltsverzeichnis und Verlinkungen ausgef√ºhrt werden.
Ein vollst√§ndige gerenderte Ansicht wird erst durch den Maven-Build Vorgang erzeugt.
Dies ist sp√§ter in diesem Dokument unter xref::handbuch_dokumentation/inhalt.adoc#asccidoc-zu-pdf-html[PDF- und HTML-Dokumente erzeugen] erl√§utert.

Im Folgenden wird mit dem Bearbeiten der Dokumentbestandteile fortgefahren.

[[dateien-bearbeiten]]
=== Dateien bearbeiten

Dieser Abschnitt beschreibt, welche Attribute und Inhalte in den Dateien angepasst werden k√∂nnen.

[[master.adoc-bearbeiten]]
==== master.adoc bearbeiten

Zun√§chst werden die Attribute `doctitle` und `document-type` gesetzt, aus denen ein einheitlicher Titel erzeugt wird, vgl. <<listing-master>>.

Dann wird die Vertraulichkeits-Einstufung `vs-einstufung` angegeben.
Dadurch wird ggf. ein Vertraulichkeitshinweis in das Dokument eingef√ºgt und ggf. das Layout angepasst.
Die m√∂glichen Werte f√ºr `vs-einstufung` finden sich in <<table-master-attributes>>.
Die `vs-einstufung` kann auch in der pom.xml als globales Attribut f√ºr alle zu generierenden Dokumente angegeben werden.
Ein Beispiel findet sich in <<listing-pom-asciidoc>>.

Daraufhin wird die Colophon-Angabe eingebunden.
Dadurch wird ein einheitlicher Abschnitt mit Metadaten des Dokuments und Lizenzbestimmungen erzeugt.
Dabei k√∂nnen noch die optionalen Attribute `factory` und `open-source` angegeben werden.
Sie sind in <<table-master-attributes>> n√§her beschrieben.

Weitere Erl√§uterungen zum Colophon Block finden sich im Abschnitt <<colophon-block>>.

.master.adoc
[id="listing-master",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc,indent=0]
----
 :doctitle: Super tolles Feature
 :document-type: Konzept
 :vs-einstufung: offen

colophon::[factory="IsyFact-Erweiterungen", open-source="false"]

 // Wird normalerweise vom Maven-Plugin gesetzt
 // :revnumber: 1.0.5
 // :revdate: 2020-01-01

\include::thisdoc.adoc[tags=inhalt]

\include::inhalt.adoc[tags=inhalt]
----

NOTE: Die manuelle Vergabe von Revisionsnummer und -datum betrifft nur Dokumente, die nicht mit Hilfe des Maven-Plugins erzeugt werden.
Ansonsten werden diese Attribute √ºber das Maven-Plugin bereitgestellt (siehe <<listing-pom-asciidoc>>).

<<table-master-attributes>> zeigt alle Attribute, die in der `master.adoc` Datei angepasst werden k√∂nnen.

.Attribute der master.adoc
[id="table-master-attributes",reftext="{table-caption} {counter:tables}"]
[cols="1,1,1,3,1",options="header"]
|===
|Attribut|Optional|Default|Beschreibung|Werte
|`doctitle`|Nein||Titel des Dokuments|
|`document-type`|Ja||Dokumententyp (z.B. Konzept), welcher als Untertitel angezeigt wird|
|`vs-einstufung`|Nein||Vertraulichkeits-Einstufung
a|
* open-source
* offen
* einstufung-fehlt
* vs-nfd
* vs-vertraulich
* geheim
* streng-geheim
|`colophon`|Nein|colophon::[]|Metadaten des Dokuments und Lizenzbestimmungen|
|`factory` als Attribut zu `colophon`|Ja|IsyFact-Standards|Definiert, ob das Dokument zu den IsyFact-Standards oder IsyFact-Erweiterungen geh√∂rt. W√§hlt das passende Logo und Deckblatt f√ºr die Factory.
a|
* IsyFact-Standards
* IsyFact-Erweiterungen
* Register Factory
|`open-source` als Attribut zu `colophon`|Ja|true|Beschreibt, ob das Dokument unter der Open Source (true) oder Closed Source (false) Lizenz der IsyFact ver√∂ffentlicht wird.|
|`revdate`|Nein||Release Datum des Bausteins oder Dokuments|
|`revnumber`|Nein||Versionsnummer des Bausteins oder Dokuments|
|===

Zuletzt werden die √ºbrigen Asciidoc Dateien in master.adoc inkludiert.
Leere Dateien k√∂nnen ausgelassen werden.
Inkludiert wird der Inhaltsbereich innerhalb der Dateien, der mit

`// tag::inhalt[]`

Dateiinhalt

`// end::inhalt[]`

getaggt ist.


[[docinfo.adoc-bearbeiten]]
==== docinfo.adoc bearbeiten

Bezieht sich das zu erstellende Dokument auf einen Baustein (Bibliothek) der IsyFact, so ist dieser Baustein inklusive der Version in einer eigenen Datei docinfo.adoc anzugeben und in master.adoc zu inkludieren.
In <<listing-master-bib>> wird beispielsweise auf den Baustein `isy-web` verwiesen.

.docinfo.adoc - Angabe des zugeh√∂rigen Bausteins
[id="listing-master-bib",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc,indent=0]
----
// Einbindung Bibliotheken, wenn nicht genutzt, entfernen
*Java Bibliothek / IT-System*

[cols="5,2,3",options="header"]
|====
|Name |Art |Version
|isy-web |Bibliothek |{version-ifs}
|====
----

In der Vorschau sollten die √Ñnderungen unmittelbar erscheinen. Ihre √Ñnderungen speichern Sie √ºber kbd:[Strg + S].

[[thisdoc.adoc-bearbeiten]]
==== thisdoc.adoc bearbeiten

Die Datei `thisdoc.adoc` ist optional auszuf√ºllen und sollte eine Einleitung in das Dokument bieten und den Aufbau und Zweck des Dokuments erl√§utern.
Diese Datei ist in der `master.adoc` integriert und wird beim Rendern in das Gesamtdokument eingef√ºgt.

[[inhalt.adoc-bearbeiten]]
==== inhalt.adoc bearbeiten

In `inhalt.adoc` wird der eigentliche Inhalt des Dokuments verfasst.
Diese Datei wird in der `master.adoc` beim Rendern nach der Datei `thisdoc.adoc` geladen.

Im Folgenden wird die Inhaltserstellung erl√§utert.


[[ein-dokument-bearbeiten]]
== Ein Dokument bearbeiten

Dieses Kapitel beschreibt die inhaltliche Bearbeitung und die dabei zu verwendenden Konventionen der IsyFact f√ºr die in <<verzeichnisstruktur-baustein>> beschriebenen Dateien.
Es handelt sich dabei vorrangig um die Datei `inhalt.adoc`.

Au√üer diesem Handbuch sind hierzu Kenntnisse der AsciiDoc-Syntax erforderlich.

[NOTE]
====
Dieses Handbuch erkl√§rt die Grundlagen der AsciiDoc-Syntax nicht weiter.
Die folgenden Webseiten bieten ausf√ºhrliche Tutorials und weiterf√ºhrende Informationen an: +
* xref:glossary:literaturextern:inhalt.adoc#litextern-AsciiDoc[What is AsciiDoc? Why do we need it?] +
* xref:glossary:literaturextern:inhalt.adoc#litextern-AsciidoctorUserManual[Asciidoctor User Manual] +
* xref:glossary:literaturextern:inhalt.adoc#litextern-AsciiDocSyntax[AsciiDoc Syntax Quick Reference] +
* xref:glossary:literaturextern:inhalt.adoc#litextern-AsciiDocTutorial[Tutorial: Using AsciiDoc and Asciidoctor to write documentation]
====

Des Weiteren sind in IsyFact-Dokumenten bestimmte Besonderheiten zu beachten.
Eine wichtige Besonderheit ist beispielsweise, dass man auf Kapitel√ºberschriften, aber auch auf Eintr√§ge wie Quellen, Fachbegriffe, Abbildungen oder Tabellen √ºber einen Querverweis referenzieren k√∂nnen muss.
Das setzt voraus, dass daf√ºr zu sorgen ist, dass jeder Eintrag einen eindeutigen _Inline-Anchor_ erh√§lt.
Hinzu kommt, dass bei der Umwandlung in die Ausgabeformate HTML und PDF vorgefertigte Skripte ausgef√ºhrt werden, die automatisch Verzeichnisse am Ende des Dokuments einf√ºgen und man auch auf die Eintr√§ge dieser Verzeichnisse per Querverweis referenzieren k√∂nnen muss.
Bei den automatisch erzeugten Verzeichnissen handelt es sich um folgende:

Literaturverzeichnis:: Quellenangaben, Referenzen auf B√ºcher oder andere IsyFact-Dokumente
Glossar:: verwendete Abk√ºrzungen, Fachbegriffe sowie nicht offensichtliche Begriffe
Abbildungsverzeichnis:: enthaltene Abbildungen mit Nummer und Beschreibung
Quelltextverzeichnis:: enthaltene Listings, beispielsweise Java, SQL etc.
Tabellenverzeichnis:: enthaltene Tabellen mit Tabellennummer und Tabellenunterschrift

Die Verzeichnisse listen ihre jeweiligen Eintr√§ge entweder nach der Position im Dokument oder alphanumerisch auf und dienen so vor allem dazu, Eintr√§ge nachzuschlagen.
Die Skripte gehen hierbei von einer bestimmten Syntax aus, die in den folgenden Abschnitten erl√§utert wird.
Je nachdem, ob es sich um eine Abbildung, eine Tabelle, einen Begriff oder ein referenziertes Medium handelt, werden jeweils unterschiedliche Bestandteile vorgesehen, die gesetzt werden m√ºssen.

[[ein-satz-pro-zeile]]
=== Zeilenumbr√ºche

Der Quelltext eines Dokuments bricht nach jedem Satz um.
Er orientiert sich nicht anhand einer fixen Spaltenbreite.
Diese Regel wird "ein Satz pro Zeile" (_one sentence per line_, s. xref:glossary:literaturextern:inhalt.adoc#litextern-AsciiDocRecommendedPractices[AsciiDoc Recommended Practices]) genannt und orientiert sich an der Art und Weise, wie Quellcode organisiert ist (eine Anweisung pro Zeile).

Die Anwendung der Regel "ein Satz pro Zeile" bringt unter anderem folgende Vorteile mit sich:

* √Ñnderungen am Anfang eines Absatzes f√ºhren nicht zu Ver√§nderungen an den restlichen Zeilenumbr√ºchen des Absatzes.
* Einzelne S√§tze k√∂nnen mit Leichtigkeit verschoben oder ausgetauscht werden.
* Abs√§tze k√∂nnen durch das Einf√ºgen oder L√∂schen von Leerzeilen mit Leichtigkeit verbunden oder auseinander gezogen werden.
* Einzelne S√§tze k√∂nnen gut auskommentiert oder mit Kommentaren versehen werden.
* Eine Analyse der Zeilenl√§nge l√§sst schnell auf zu lange S√§tze (z.B. Bandwurm- oder Schachtels√§tze) oder andere Anomalien wie eine redundante Schreibweise (z.B. alle S√§tze eines Absatzes beginnen gleich) schlie√üen.

Die Regel passt au√üerdem sehr gut zur gleichzeitigen Verwendung eines modernen Versionsverwaltungssystems, das Branching sowie Merging unterst√ºtzt und Merges zeilenweise verarbeitet.
Neue oder gel√∂schte S√§tze kann das Versionsverwaltungssystem leicht interpretieren und zusammenf√ºhren, da sie sich auf jeweils unterschiedliche Zeilen auswirken.
Merge-Konflikte passieren h√§ufig auf Ebene eines Satzes.
Sie sind daher leicht verst√§ndlich, lokal begrenzt und daher in den meisten F√§llen gut zu l√∂sen.


[[ueberschriften]]
=== √úberschriften

√úberschriften k√∂nnen bei AsciiDoc auf unterschiedlicher Weise gesetzt werden.
Bei einem IsyFact-Dokument ist hingegen stets die Variante zu w√§hlen, bei der die Anzahl der vorgesetzten Gleichheitszeichen die Ebene der √úberschrift anzeigt.
Das folgende Beispiel definiert ein Kapitel und ein Unterkapitel.

.Syntax von √úberschriften
[id="listing-ueberschriften",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc]
----
== Hallo Welt Kapitel
Das ist ein Hallo Welt Text zum Kapitel.

=== Hallo Welt Unterkapitel
Das ist ein Hallo Welt Text zum Unterkapitel.
----

F√ºr ein IsyFact-Dokument sind diese √úberschriften aber noch nicht vollkommen, denn es fehlen noch die _Inline-Anchor_.
Der Inline-Anchor wird √ºber eckige Klammern gesetzt.
Ferner muss die ID des Anchors durchg√§ngig mit kleinen Buchstaben geschrieben werden und darf keine Leer- oder Sonderzeichen enthalten.

.√úberschriften mit Inline Anchors
[id="listing-ueberschriften-final",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc]
----
[[beispiel-kapitel]]
== Beispiel-Kapitel
Das ist ein Beispieltext zum Kapitel.

[[beispiel-unterkapitel]]
=== Beispiel-Unterkapitel
Das ist ein Beispieltext zum Unterkapitel.
----

Einen Querverweis auf eine √úberschrift setzt man √ºber zwei Paare spitzer Klammern.

.Querverweis auf eine √úberschrift
[id="listing-querverweis",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc]
----
Zum <<ueberschriften, Beispiel-Kapitel>> gelangen Sie √ºber einen Mausklick.
Im √úbrigen handelt es sich bei dem Beispiel-Kapitel um das Kapitel <<ueberschriften>>.
----

Der erste Parameter in dem Klammer-Paar legt die ID des Querverweises fest.
Der zweite Parameter kann gesetzt werden, wenn statt dem Namen des Kapitels ein eigener Text verwendet werden soll.
Der erzeugte Text sieht wie folgt aus:

_Zum <<ueberschriften, Beispiel-Kapitel>> gelangen Sie √ºber einen Mausklick._
_Im √úbrigen handelt es sich bei dem Beispiel-Kapitel um das Kapitel <<ueberschriften>>._

[[admonition-blocks]]
=== Admonition-Blocks

Mit Admonition Blocks k√∂nnen Inhalte in Dokumenten exponiert dargestellt werden, sodass ihnen besondere Aufmerksamkeit zuteil wird.
Standardm√§√üig werden f√ºnf verschiedene Bl√∂cke angeboten.
Die IsyFact-Dokumentation erweitert diese Liste um weitere Bl√∂cke f√ºr verbindliche Regeln.

Es gibt zwei M√∂glichkeiten zur Definition von Admonition Blocks.
Die syntaktisch ausf√ºhrlichere Variante funktioniert sowohl mit den vordefinierten, als auch mit den selbst definierten Bl√∂cken.

.Definition eines Admonition Blocks (als Block)
[id="listing-admonition-block",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc]
----
[BLOCKTYP]
====
Hier steht der Text.
====
----

Die syntaktisch schlankere Variante funktioniert nur mit den vordefinierten Bl√∂cken (NOTE, TIP, IMPORTANT, WARNING und CAUTION).

.Definition eines Admonition Blocks (inline)
[id="listing-admonition-inline",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc]
----
BLOCKTYP: Hier steht der Text.
----

==== Vordefinierte Bl√∂cke

Den folgenden, vordefinierten Bl√∂cken fallen in der IsyFact-Dokumentation einheitliche Bedeutungen zu.
Sie helfen dabei, optionale oder erg√§nzende Inhalte zu markieren, geben Erfahrungswerte weiter und warnen vor typischen Fehlersituationen oder Fallstricken.

[[note-admonition]]
.NOTE Admonition
image::handbuch/note.dn.svg[align="center"]

[[tip-admonition]]
.TIP Admonition
image::handbuch/tip.dn.svg[align="center"]

[[important-admonition]]
.IMPORTANT Admonition
image::handbuch/important.dn.svg[align="center"]

[[warning-admonition]]
.WARNING Admonition
image::handbuch/warning.dn.svg[align="center"]

[[caution-admonition]]
.CAUTION Admonition
image::handbuch/caution.dn.svg[align="center"]


==== Selbst definierte Bl√∂cke

Die folgenden, selbst definierten Bl√∂cke, bilden Regeln und Vorgaben der IsyFact ab, die verpflichtend einzuhalten sind.
Sie bilden die Grundlage f√ºr eine zur IsyFact konforme Umsetzung von Anforderungen und definieren so ma√ügeblich, wie Konformit√§t zur IsyFact erzielt wird.

[[anwendungsanforderung-admonition]]
.ANWENDUNGSANFORDERUNG Admonition
image::handbuch/anwendungsanforderung.dn.svg[align="center"]

[[architekturregel-admonition]]
.ARCHITEKTURREGEL Admonition
image::handbuch/architekturregel.dn.svg[align="center"]

[[sicherheit-admonition]]
.SICHERHEIT Admonition
image::handbuch/sicherheit.dn.svg[align="center"]

[[styleguide-admonition]]
.STYLEGUIDE Admonition
image::handbuch/styleguide.dn.svg[align="center"]
{empty} +


==== Verwendung von Tags zur Kennzeichnung

Folgende Bl√∂cke sind zus√§tzlich mit einem Tag zu kennzeichnen:

* IMPORTANT (Tag-Name: `important`)
* ANWENDUNGSANFORDERUNG (Tag-Name: `anwendungsanforderung`)
* ARCHITEKTURREGEL (Tag-Name: `architekturregel`)
* SICHERHEIT (Tag-Name: `sicherheit`)
* STYLEGUIDE (Tag-Name: `styleguide`)

Damit lassen sich die Regeln oder Anforderungen aus der gesamten Dokumentation zusammenziehen und geb√ºndelt bereitstellen, z.B. als Checklisten oder zur Grundlage automatischer √úberpr√ºfungen.

Die Tags werden jeweils am Anfang und am Ende des Blocks gesetzt. Setzen des Tags am Beispiel einer Architekturregel:

`// tag::architekturregel[]` +
`[ARCHITEKTURREGEL]` +
`====` +
Hier steht der Text. +
`====`

`// end::architekturregel[]`


WARNING: Die Leerzeile zwischen dem Block und dem Ende des Tags ist wichtig, damit die B√ºndelung der Inhalte korrekt funktioniert.

Zur B√ºndelung von Inhalten wird das entsprechende Dokument eingebettet.
√úber den Parameter `tags` werden nur die Inhalte eingef√ºgt, die von den entsprechenden Tags umgeben sind.

.B√ºndelung von Inhalten anhand von Tags
[id="listing-include-tags",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc]
----
\include::pfad_zum_dokument.adoc[tags=beispiel;...]
----


[[bilder]]
=== Abbildungen

Das Einbinden von Abbildungen gelingt in AsciiDoc √ºber die folgende Syntax:

.Abbildung einf√ºgen (AsciiDoc)
[id="listing-bild-einfuegen",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc]
----
image::beispiel.png
----

In einem IsyFact-Dokument muss eine Abbildung zus√§tzlich:

* eine Beschreibung enthalten,
* eindeutig identifizierbar und referenzierbar sein,
* am Ende des Dokuments in einem Abbildungsverzeichnis erscheinen.

Deswegen werden Abbildungen in IsyFact-Dokumenten wie folgt definiert:

.Abbildung einf√ºgen (IsyFact)
[id="listing-bild-einfuegen2",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc,subs="attributes+"]
----
:desc-image-beispiel: Beispiel
[{id-equals}"image-beispiel",reftext="{figure-caption} {counter:figures}"]
.{desc-image-beispiel}
image::beispiel.png
----

Das Skript f√ºr die automatische Erstellung des Abbildungsverzeichnisses sucht alle Abbildungen im Dokument und erstellt hieraus ein Verzeichnis am Ende des Dokuments.

// tag::important[]
IMPORTANT: Die vorgegebene Syntax zu Abbildungen muss zwingend eingehalten werden, da die Abbildungen ansonsten nicht bei der Generierung des Abbildungsverzeichnisses ber√ºcksichtigt werden.

// end::important[]

F√ºr Ihre eigenen Abbildungen ersetzen Sie den Bezeichner `beispiel` durch Ihren eigenen Bezeichner.

// tag::important[]
IMPORTANT: Abbildungen zu einem Dokument werden stets im Unterordner `/images` abgelegt.

// end::important[]

Abbildungen k√∂nnen wie √ºblich √ºber einen Querverweis referenziert werden:

 <<image-beispiel>>

Wenn die Abbildung zentriert werden soll, f√ºgt man das Attribut `[align="center"]` hinzu.

.Abbildung zentriert einf√ºgen
[id="listing-bild-einfuegen3",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc,subs="attributes+"]
----
:desc-image-beispiel: Beispiel
[{id-equals}"image-beispiel",reftext="{figure-caption} {counter:figures}"]
.{desc-image-beispiel}
image::beispiel.png[align="center"]
----

Eine Skalierung der Abbildung ist auch m√∂glich.
Im folgenden Beispiel wird die Abbildung auf 80% skaliert.
Die doppelte Angabe der Breite ist leider n√∂tig, damit die Abbildung in allen Ausgabeformaten richtig skaliert wird.
HTML-Dokumente ben√∂tigen die Angabe von `scaledwidth`, PDF-Dokumente wiederum `pdfwidth`.

.Abbildung zentriert und skaliert einf√ºgen
[id="listing-bild-einfuegen4",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc,subs="attributes+"]
----
:desc-image-beispiel: Beispiel
[{id-equals}"image-beispiel",reftext="{figure-caption} {counter:figures}"]
.{desc-image-beispiel}
image::beispiel.png[align="center",pdfwidth=80%,scaledwidth=80%]
----

[[tabellen]]
=== Tabellen

In AsciiDoc wird eine Tabelle √ºber folgende Syntax definiert:

.Tabelle einf√ºgen
[id="listing-tabelle1",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc]
----
|====
|Zelle 11|Zelle 12|Zelle 13|Zelle 14
|Zelle 21|Zelle 22|Zelle 23|Zelle 24
|Zelle 31|Zelle 32|Zelle 33|Zelle 34
|====
----

Das Ergebnis ist folgende Tabelle:

|====
|Zelle 11|Zelle 12|Zelle 13|Zelle 14
|Zelle 21|Zelle 22|Zelle 23|Zelle 24
|Zelle 31|Zelle 32|Zelle 33|Zelle 34
|====

In einem IsyFact-Dokument muss eine Tabelle aber auch:

- eine Tabellenunterschrift enthalten,
- √ºber einen Identifizierer referenziert werden k√∂nnen und
- mit einer Kopfzeile beginnen.

Hierf√ºr soll folgende Syntax verwendet werden:

.Tabelle einf√ºgen in IsyFact
[id="listing-tabelle2",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc,subs="attributes+"]
----
:desc-table-beispiel: Beispiel-Tabelle
[{id-equals}"table-beispiel",reftext="{table-caption} {counter:tables}"]
.{desc-table-beispiel}
[options="header"]
|====
|Spalte 1|Spalte 2|Spalte 3|Spalte 4
|Zelle 11|Zelle 12|Zelle 13|Zelle 14
|Zelle 21|Zelle 22|Zelle 23|Zelle 24
|Zelle 31|Zelle 32|Zelle 33|Zelle 34
|====
----

Das Ergebnis sieht dann so aus:

.Beispiel-Tabelle
[id="table-beispiel",reftext="{table-caption} {counter:tables}"]
[options="header"]
|====
|Spalte 1|Spalte 2|Spalte 3|Spalte 4
|Zelle 11|Zelle 12|Zelle 13|Zelle 14
|Zelle 21|Zelle 22|Zelle 23|Zelle 24
|Zelle 31|Zelle 32|Zelle 33|Zelle 34
|====

Auch hier k√∂nnen Sie den Bezeichner `beispiel` mit Ihrem eigenen Bezeichner ersetzen.
Ferner kann die Tabelle im AsciiDoc-Text √ºber ihre ID referenziert werden:

 <<table-beispiel>>

[[listings]]
=== Listings

Quelltexte k√∂nnen bei AsciiDoc auf folgende Weise mit Syntaxhighlighting angezeigt werden.

.Quelltext einf√ºgen
[id="listing-quelltext1",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc,indent=0]
----
 [source,java]
 ----
 public class HalloWelt {
    public static void main(String[] args) {
        System.out.println("Hallo Welt");
    }
 }
 ----
----

Die Ausgabe sieht wie folgt aus:

[source,java]
----
public class HalloWelt {
    public static void main(String[] args) {
        System.out.println("Hallo Welt");
    }
}
----

Auch hier wird noch eine Listing-√úberschrift und eine ID ben√∂tigt:

.Quelltext einf√ºgen in IsyFact
[id="listing-quelltext2",reftext="{listing-caption} {counter:listings }"]
[source,asciidoc,subs="attributes+",indent=0]
----
 :desc-listing-hallowelt: HalloWelt.java
 [{id-equals}"listing-hallowelt",reftext="{listing-caption} {counter:listings }"]
 .{desc-listing-hallowelt}
 [source,java]
 ----
 public class HalloWelt {
     public static void main(String[] args) {
         System.out.println("Hallo Welt");
     }
 }
 ----
----

Wie in den vorigen Beispielen k√∂nnen Sie auch hier den Bezeichner `hallowelt` mit Ihrem eigenen Bezeichner ersetzen.
Ferner kann das Listing im AsciiDoc-Text √ºber seine ID referenziert werden:

 <<listing-hallowelt>>

[[literaturverzeichnis]]
=== Literaturverzeichnis

Am Ende eines Dokuments wird automatisch ein Literaturverzeichnis erstellt.
Voraussetzung f√ºr die Aufnahme eines Eintrags in das lokale Literaturverzeichnis ist die Referenzierung des entsprechenden Dokuments und das Vorhandensein der referenzierten Id in der Literaturverzeichnis-Konfigurationsdatei in <<isy-asciidoctorj-extensions>>.

Eine Referenz auf einen Literatureintrag erfolgt √ºber doppelte spitze Klammerpaare, wobei der erste Eintrag die Id in der Literaturverzeichnis-Konfigurationsdatei in isy-asciidoctorj-extensions ist.

Ein Beispiel f√ºr referenzierte Literatur: \<<AsciiDocRecommendedPractices,AsciiDoc Recommended Practices>>.

Das Ergebnis sieht so aus:

Ein Beispiel f√ºr referenzierte Literatur: `<<AsciiDocRecommendedPractices,AsciiDoc Recommended Practices>>.`

[[glossar]]
=== Glossar

Am Ende eines Dokuments wird automatisch ein Glossar erstellt.
Voraussetzung f√ºr die Aufnahme eines Eintrags in das lokale Glossar ist die Referenzierung des entsprechenden Eintrags und das Vorhandensein des Eintrags mit der referenzierten Id im zentralen Glossar in <<isy-asciidoctorj-extensions>>.

Eine Referenz auf einen Begriff des Glossars erfolgt √ºber doppelte spitze Klammerpaare, wobei der erste Eintrag die Id im zentralen Glossar in isy-asciidoctorj-extensions ist.
Die ID soll mit dem Bezeichner `glossar-` beginnen.

 Hier wurde ein <<glossar-halloweltbeispiel, Hallo Welt Beispiel>> verwendet.

Das Ergebnis sieht wie folgt aus:

`Hier wurde ein <<glossar-halloweltbeispiel, Hallo Welt Beispiel>> verwendet.`
{empty} +

[[asccidoc-zu-pdf-html]]
== PDF- und HTML-Dokumente erzeugen

Ist das zu bearbeitende Dokument fertiggestellt, so kann es nun vollst√§ndig gerendert und in eine PDF- und HTML-Datei exportiert werden.
Dies geschieht mithilfe des Asciidoctor Maven Plugins und der `isy-asciidoctorj-extensions`.
`isy-asciidoctorj-extensions` ist eine Sammlung von verschiedenen xref:glossary:literaturextern:inhalt.adoc#litextern-asciidoctorj-extensions[AsciidoctorJ Extensions], welche die Wartung der IsyFact-Dokumentation erleichtern.
Eine Liste aller IsyFact Extensions befindet sich im Abschnitt <<isy-asciidoctorj-extensions>>.

[[asciidoc-in-pom-einbinden]]
=== Maven-Konfiguration

Die `isy-asciidoctorj-extensions` k√∂nnen √ºber das `asciidoctor-maven-plugin` in der pom.xml eingebunden werden.
Zun√§chst sind folgende Properties dem Element `<properties></properties>` hinzuzuf√ºgen:

*Properties*

.Hinzuzuf√ºgende Properties
[{id-equals}"listing-pom-properties",reftext="{listing-caption} {counter:listings }"]
[source,xml,subs="attributes+"]
----
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <html-output-base-directory>${project.build.directory}/doc/html</html-output-base-directory>
    <pdf-output-base-directory>${project.build.directory}/doc/pdf</pdf-output-base-directory>
    <maven.build.timestamp.format>dd.MM.yyyy</maven.build.timestamp.format>
    <asciidoctorj-extensions.version>2.3.0</asciidoctorj-extensions.version>
</properties>
----

Folgendes Listing zeigt die Konfiguration f√ºr einen lauff√§higen Asciidoctor Build inklusive `isy-asciidoctorj-extensions`.

*Integration Asciidoctor Maven Plugin*

.Integration der `isy-asciidoctorj-extensions` in das Asciidoctor Maven Plugin
[id="listing-pom-asciidoc",reftext="{listing-caption} {counter:listings }"]
[source,xml,subs="attributes+"]
----
    <build>
        <plugins>
            <plugin>
                <groupId>org.asciidoctor</groupId>
                <artifactId>asciidoctor-maven-plugin</artifactId>
                <version>2.1.0</version> <1>
                <dependencies>
                    <dependency>
                        <groupId>org.asciidoctor</groupId>
                        <artifactId>asciidoctorj-pdf</artifactId>
                        <version>1.5.3</version>
                    </dependency>
                    <dependency>
                        <groupId>de.bund.bva.isyfact</groupId> <2>
                        <artifactId>isy-asciidoctorj-extensions</artifactId>
                        <version>${isy-asciidoctorj-extensions.version}</version>
                    </dependency>
                </dependencies>

                <configuration>
                    <outputDirectory>${project.build.directory}</outputDirectory>
                    <attributes>
                        <revnumber>IF-${project.version}</revnumber>
                        <revdate>${maven.build.timestamp}</revdate>
                        <version-ifs>${project.version}</version-ifs>
                        <vs-einstufung>offen</vs-einstufung> <3>
                    </attributes>
                </configuration>

                <executions>
                    <execution> <4>
                        <id>html-build</id>
                        <phase>generate-resources</phase>
                        <goals>
                            <goal>process-asciidoc</goal>
                        </goals>
                        <configuration>
                            <backend>html</backend>
                            <sourceDirectory>src/docs/OrdnerDokument</sourceDirectory>
                            <sourceDocumentName>master.adoc</sourceDocumentName>
                            <outputFile>${project.build.directory}/doc/Dokument.html</outputFile>
                        </configuration>
                    </execution>
                    <execution>
                        <id>pdf-build</id>
                        <phase>generate-resources</phase>
                        <goals>
                            <goal>process-asciidoc</goal>
                        </goals>
                        <configuration>
                            <backend>pdf</backend>
                            <sourceDirectory>src/docs/OrdnerDokument</sourceDirectory>
                            <sourceDocumentName>master.adoc</sourceDocumentName>
                            <outputFile>${project.build.directory}/doc/Dokument.pdf</outputFile>
                            <attributes>
                                <pdf-style>isyfact-closed</pdf-style>
                            </attributes>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
----

<1> Es wird die aktuellste Version des Maven Plugins ben√∂tigt.
<2> Einf√ºgen der `isy-asciidoctorj-extensions` als Dependency des Maven Plugins.
<3> Die Angabe der `vs-einstufung` ist an dieser Stelle optional und gilt f√ºr alle Dokumente. √úblicherweise wird die `vs-einstufung` in master.adoc gesetzt, dort ist sie verpflichtend, wenn sie nicht schon wie hier in der pom.xml gesetzt wurde. Vgl. <<listing-master>>.
<4> Es ist zu beachten, dass die Konfigurationen im Element `<executions></executions>` zu editieren sind, siehe <<dokument-pom-aufnehmen>>.


[[dokument-pom-aufnehmen]]
=== Integration in den Build-Prozess

Jedes Dokument, das w√§hrend des Build-Prozesses gerendert werden soll, muss daf√ºr in die `pom.xml` aufgenommen werden.

Innerhalb von `<executions></executions>` werden die zu rendernden Dokumente definiert.
F√ºr jedes zu rendernde Dokumente m√ºssen zwei `<execution>`-Elemente vorhanden sein.
Das erste `<execution>`-Element definiert die Erzeugung der HTML-Datei.
Das zweite `<execution>`-Element definiert die Erzeugung der PDF-Datei.

<<listing-pom-asciidoc>> zeigt ein Beispiel.

Folgende Parameter m√ºssen angepasst werden:

.Anzupassende Parameter
[id="table-pom_parameter",reftext="{table-caption} {counter:tables}"]
[options="header"]
|====
|Parameter|Beschreibung|Beispiel
|<id></id>| Eine eindeutige Kennung des Dokuments. Sollte Aufschluss √ºber das Dokument und das Ausgabeformat geben.| `mein-dokument-pdf` oder `mein-dokument-html`
|<sourceDirectory></sourceDirectory>| Definiert den Pfad zum Verzeichnis, in dem die master.adoc Datei liegt.| `src/docs/OrdnerDokument`
|<outputFile></outputFile>| Definiert Pfad und Dateinamen der Ausgabedatei. | `${project.build.directory}/doc/Dokument.pdf`
|====

Anschlie√üend kann der Build-Vorgang ausgef√ºhrt und die PDF- und HTML Dokumente erzeugt werden.

[[dokument-rendern]]
=== Gerendertes Dokument erstellen

Um den Build-Vorgang zu starten, wird in der Konsole in das Verzeichnis gewechselt, in dem auch die bearbeitete `pom.xml` liegt.
Anschlie√üend wird mit dem Befehl `mvn install` der Build-Vorgang gestartet.
Aufgrund der Vielzahl der zu rendernden Dokumente und auszuf√ºhrenden Skripte kann der Build-Vorgang einige Zeit in Anspruch nehmen.
F√ºr Test-Zwecke k√∂nnen in der `pom.xml` nicht relevante Dokumente √ºbersprungen werden, indem die zugeh√∂rigen Ausf√ºhrungsdefinitionen (`<execution></execution>`) auskommentiert werden.

==== Fehlerszenarien beim Generieren

.Fehlerszenarien, Ursachen und L√∂sungen bei der Generierung
[id="table-table-asciidoc-fehler",reftext="{table-caption} {counter:tables}"]
[options="header"]
[cols="3,8a",options="header"]
|====
|Fehler|M√∂gliche Ursachen und L√∂sungen
|`OutOfMemoryException` (max. HeapSize exceeded) |
M√∂gliche Ursache:: Bei der Generierung von PDF-Dokumenten werden Rastergrafiken in ein PNM-Format (PPM, PGM oder PBM) konvertiert.
Dies f√ºhrt bei Dokumenten mit vielen Grafiken oder Grafiken mit sehr hoher Aufl√∂sung zu Speicherproblemen.

Probleml√∂sungen::
. *Vektorgrafiken verwenden:* Bei Vektorgrafiken (z.¬†B. im SVG-Format) entf√§llt die Konvertierung.
. *Herabsetzen der Aufl√∂sung:* Bei Bildern mit einer Aufl√∂sung von 2000 Pixeln und mehr (egal ob L√§nge oder Breite) wird empfohlen, die Aufl√∂sung nach M√∂glichkeit zu reduzieren.
Selbst bei der Verwendung vieler kleinerer Bilder kann es zu einer `OutOfMemoryException` kommen.
Der Grund hierf√ºr ist, dass der vom System zur Verf√ºgung gestellte Speicher nach und nach voll√§uft.
Tritt der Fehler deswegen auf, sollten Bilder nach M√∂glichkeit in Vektorgrafiken umgewandelt bzw. neu gezeichnet werden.
|====

[[isy-asciidoctorj-extensions]]
== IsyFact Extensions

Die IsyFact Extensions 'isy-asciidoctorj-extensions` sind eine Sammlung von verschiedenen AsciidoctorJ Extensions, welche die Wartung der IsyFact-Dokumentation erleichtern.
Die IsyFact bietet derzeit folgende AsciidoctorJ Extensions an:

|===
|Extension/Klasse |Beschreibung |Referenzbeispiel

|<<IsyAttributesPreprocessor,IsyAttributesPreprocessor>>

`de.bund.bva.isyfact.attributes` `.IsyAttributesPreprocessor`
|Erzeugt Metainformationen am Anfang eines Dokuments. Erzeugt den Titel und w√§hlt das passende Theme f√ºr ein Dokument.
|siehe <<listing-master>>
|BibliographyPreprocessor

`de.bund.bva.isyfact.bibliography` `.BibliographyPreprocessor`
|Erzeugt ein Literaturverzeichnis aus allen bekannten Quellen, die im Dokument enthalten und als Referenz markiert sind.
|siehe <<literaturverzeichnis>>
|<<ColophonBlockMacroProcessor,ColophonBlockMacroProcessor>>

`de.bund.bva.isyfact.colophon` `.ColophonBlockMacroProcessor`
|Erzeugt allgemeine Dokumentinformationen durch Verarbeiten des `colophon::[]` Blocks.
|`colophon::[]`
|IsyGlossaryBlockMacroProcessor

`de.bund.bva.isyfact.glossary` `.IsyGlossaryBlockMacroProcessor`
|Erkennt `isy-glossary::[]` im Asciidoc Quellcode und f√ºgt an der Stelle des Blocks das zentrale Glossar der IsyFact als Tabelle ein.
|`isy-glossary::[]`
|GlossaryPreprocessor

`de.bund.bva.isyfact.glossary` `.GlossaryPreprocessor`
|Erzeugt ein Glossar f√ºr das jeweilige Dokument mit allen bekannten Begriffen, die im Dokument enthalten und als Referenz markiert sind.
|siehe <<glossar>>
|ListOfPreprocessor

`de.bund.bva.isyfact.listof` `.ListOfPreprocessor`
|Erzeugt ein Abbildungs- Tabellen- und Listenverzeichnis f√ºr das jeweilige Dokument f√ºr alle Elemente im Dokument, die entsprechend markiert sind.
|siehe <<bilder>>, <<tabellen>> und <<listings>>
|===

[[isy-attributes-preprocessor]]
=== IsyAttributesPreprocessor

Der `IsyAttributesPreprocessor` wertet alle IsyFact Attribute am Anfang eines master.adoc aus (Leerzeichen und Kommentare werden ignoriert) und f√ºgt die entsprechenden Metainformationen in jedes Dokument ein.

Mit Hilfe der Attribute wird der Titel mit optionalem Untertitel generiert, sowie das passende Theme f√ºr das Dokument
ausgew√§hlt. Dabei k√∂nnen folgende Attribute angepasst werden <<table-master-attributes>>.

Standardm√§√üig sind die Extensions auf den Bau von IsyFact-Standards Bausteinen mit einer Open Source Lizenz konfiguriert.

[[colophon-block]]
=== ColophonBlockMacroProcessor

Der `ColophonBlockMacroProcessor` erkennt `colophon::[]` Bl√∂cke im Asciidoc Code und ersetzt diese durch die allgemeinen
Dokumentinformationen der IsyFact.
Dabei k√∂nnen noch die optionalen Attribute `factory` und `open-source` angegeben werden.
<<listing-master>> zeigt die beispielhafte Verwendung des `colophon::[]` blocks in einem Asciidoc Dokument.


[[vorgaben-changelog]]
== Zentralisiertes und automatisiertes Changelog

Jede Komponente eines Projekts und jedes Dokument erhalten eine eigene Changelog-Datei im AsciiDoc-Format (`.adoc`).
Diese Datei wird im Folgenden Komponentenchangelog genannt.
Dadurch k√∂nnen √Ñnderungen nah am √Ñnderungsort dokumentiert werden und Entwickler und Architekten k√∂nnen einzelne Eintr√§ge des Changelogs direkt einer Komponente oder einem Dokument zuordnen.
Damit jedoch auch alle √Ñnderungen eines Projekts (Menge aller Komponenten/Dokumente) zentral in einem Dokument zusammengefasst k√∂nnen, wird eine weitere Changelog-Datei im root-Verzeichnis des Projekts angelegt.
Diese Changelog-Datei, im Folgenden Projektchangelog genannt, bindet die einzelnen Changelog-Dateien automatisch und nach Release gruppiert ein.
Auf diese Weise besitzt jedes Projekt ein zentrales Changelog und (je nach Projekt) mehrere dezentrale Komponentenchangelogs ohne die Eintr√§ge redundant verwalten zu m√ºssen.

.Zusammenf√ºhrung der einzelnen Komponentenchangelogs
[id="image-architektur_changelogs",reftext="{figure-caption} {counter:figures}"]
image::handbuch/architektur_changelog.png[align="center",width=80%,pdfwidth=80%]

Zum Erstellen und Bearbeiten wird empfohlen, einen Texteditor zu verwenden, der das AsciiDoc Format unterst√ºtzt (siehe Kapitel <<vsc-installieren>>).

Im Folgenden wird beschrieben, wie die einzelnen Changelog-Dateien erstellt und welche Anforderungen an die Struktur und den Inhalt der Changelogs gestellt werden.

[[changelog-anlegen]]
=== Anlegen der Changelog-Dateien

Sowohl der Projektchangelog, als auch der Komponentenchangelog werden mit AsciiDoc erstellt.
Das Dateiformat ist `.adoc`.

[[komponentenchangelog-anlegen]]
==== Komponentenchangelog

F√ºr jede Komponente und jedes AsciiDoc-Dokument (z.B. Nutzungsvorgaben) wird eine eigene AsciiDoc Datei (`changelog.adoc`) erstellt.
Bei Dokumenten wird diese Datei im gleichen Verzeichnis wie das Dokument selbst abgelegt.

.Ablageort des Komponentenchangelog f√ºr ein Dokument
[id="image-ablage_komponentenchangelog_dokument",reftext="{figure-caption} {counter:figures}"]
image::handbuch/ablage_komponentenchangelog_dokument.png[align="center",width=60%,pdfwidth=60%]

Bei Komponenten wird diese Datei im root-Verzeichnis der Komponente abgelegt:

.Ablageort des Komponentenchangelog f√ºr eine Komponente
[id="image-ablage_komponentenchangelog_komponente",reftext="{figure-caption} {counter:figures}"]
image::handbuch/ablage_komponentenchangelog_komponente.png[align="center",width=60%,pdfwidth=60%]

In die Datei wird die √úberschrift "Changelog" eingef√ºgt:

.Komponentenchangelog Inhalt
[id="listing-komponentenchangelog_ueberschrift",reftext="{listing-caption} {counter:listings }"]
[source,adoc]
----
[[changelog]]
== Changelog
----

[[projektchangelog-anlegen]]
==== Projektchangelog

Die zentrale Projektchangelog-Datei `changelog.adoc` wird im root-Verzeichnis des Projekts abgelegt:

.Ablageort des zentralen Projektchangelogs
[id="image-ablage_projektchangelog",reftext="{figure-caption} {counter:figures}"]
image::handbuch/ablage_projektchangelog.png[align="center",width=60%,pdfwidth=60%]

Initial wird die Datei ebenfalls mit der √úberschrift "Changelog" bef√ºllt:

[[struktur-changelog]]
=== Struktur der Changelog-Dateien

Der Aufbau des Projektchangelogs und der Komponentenchangelogs unterscheidet sich und wird im Folgenden erl√§utert.

[[struktur-komponentenchanglog]]
==== Komponentenchangelog

Der Komponentenchangelog enth√§lt die Changelog-Eintr√§ge nach Release gruppiert.
Dazu wird f√ºr jedes Release ein eigener Release-Tag definiert:

.Erstellung Release-Tag im Komponentenchangelog
[id="listing-komponentenchangelog_release",reftext="{listing-caption} {counter:listings }"]
[source,adoc]
----
// tag::release-2.1.0[]

// --> Hier werden die Changelogeintr√§ge f√ºr Release 2.1.0 verfasst

// end::release-2.1.0[]


// tag::release-2.0.0[]

// --> Hier werden die Changelogeintr√§ge f√ºr Release 2.0.0 verfasst

// end::release-2.0.0[]
----

Jeder Release-Tag enth√§lt die Versionsnummer des Releases und eine entsprechende √úberschrift.

Somit ergibt sich folgender Gesamtaufbau des Komponentenchangelogs:

.Gesamtstruktur Komponentenchangelog
[id="listing-komponentenchangelog_gesamt",reftext="{listing-caption} {counter:listings }"]
[source,adoc]
----
[[changelog]]
== Changelog

*√Ñnderungen IsyFact 2.1.0*

// tag::release-2.1.0[]

// --> Hier werden die Changelogeintr√§ge f√ºr Release 2.1.0 verfasst

// end::release-2.1.0[]

*√Ñnderungen IsyFact 2.0.0*

// tag::release-2.0.0[]

// --> Hier werden die Changelogeintr√§ge f√ºr Release 2.0.0 verfasst

// end::release-2.0.0[]
----

Die Struktur des Kompontenchangelogs ist damit erfolgreich erstellt.

[[struktur-projektchangelog]]
==== Projektchangelog

Im Projektchangelog sollten nach M√∂glichkeit keine Changelog-Eintr√§ge verfasst, sondern ausschlie√ülich die Komponentenchangelogs eingebunden werden.
Dazu wird f√ºr jedes Release ein eigener Abschnitt erstellt:

.Erstellung Release
[id="listing-projektchangelog_release",reftext="{listing-caption} {counter:listings }"]
[source,adoc]
----
=== √Ñnderungen IsyFact 2.1.0

// Beginn √úbergreifende √Ñnderungen

// Ende √ºbergreifende √Ñnderungen

----

Jeder Abschnitt enth√§lt die Versionsnummer des Releases.

Unterhalb der Release Definition ist der Platz f√ºr die Beschreibung von komponenten√ºbergreifenden √Ñnderungen vorbehalten, die nicht einzelnen Komponenten zugeordnet werden k√∂nnen.
Dieses direkte Einf√ºgen von Eintr√§gen in das Projektchangelog sollte nur in Ausnahmef√§llen geschehen (siehe Kapitel <<inhalt-projektchangelog>>.

Anschlie√üend werden die Komponentenchangelogs in das Projektchangelog eingebunden.
Dazu wird f√ºr jedes Release nur der mit dem Release getaggte Abschnitt der Komponentenchangelogs importiert:

.Einbindung der Komponentenchangelogs
[id="listing-projektchangelog_einbindung_komponentenchangelog",reftext="{listing-caption} {counter:listings }"]
[source,adoc]
----
=== √Ñnderungen IsyFact 2.1.0

// Beginn √úbergreifende √Ñnderungen

// Ende √ºbergreifende √Ñnderungen

\include::src/docs/10_IsyFact-Standards/00_Allgemein/IsyFact-Einstieg/changelog.adoc[tag=release-2.1.0]
\include::src/docs/10_IsyFact-Standards/00_Allgemein/IsyFact-Glossar/changelog.adoc[tag=release-2.1.0]
...
----

Mehrere Releases werden wie folgt angelegt:

.Gesamtstruktur Projektchangelog
[id="listing-projektchangelog_einbindung_releases",reftext="{listing-caption} {counter:listings }"]
[source,adoc]
----
[[changelog]]
== Changelog

=== √Ñnderungen IsyFact 2.1.0

// Beginn √úbergreifende √Ñnderungen

// Ende √ºbergreifende √Ñnderungen

\include::src/docs/10_IsyFact-Standards/00_Allgemein/IsyFact-Einstieg/changelog.adoc[tag=release-2.1.0]
\include::src/docs/10_IsyFact-Standards/00_Allgemein/IsyFact-Glossar/changelog.adoc[tag=release-2.1.0]
...

=== √Ñnderungen IsyFact 2.0.0

// Beginn √úbergreifende √Ñnderungen

// Ende √ºbergreifende √Ñnderungen

\include::src/docs/10_IsyFact-Standards/00_Allgemein/IsyFact-Einstieg/changelog.adoc[tag=release-2.0.0]
\include::src/docs/10_IsyFact-Standards/00_Allgemein/IsyFact-Glossar/changelog.adoc[tag=release-2.0.0]
...
----

[[inhalt-changlog]]
=== Inhalt der Changelog-Dateien

Diese Kapitel beschreibt die Anforderungen an den Inhalt einzelner Changelogeintr√§ge.
Changelogs sollen den Entwicklern von IsyFact-Anwendungen Mitgrationsanleitungen liefern, um von einer √§lteren IsyFact Version auf eine neuere einfach und schnell wechseln zu k√∂nnen.
Damit der Changelog diesen Zweck erf√ºllt, ist es wichtig, dass sowohl die Entscheidung zur Erstellung eines Changelogeintrags, als auch der Inhalt des Eintrags mit Bedacht gew√§hlt wird.

[[inhalt-komponentenchangelog]]
==== Komponentenchangelog

In diesen F√§llen sollte *immer ein* Changelogeintrag erstellt werden:

* Sicherheitspatches
* Datenbank√§nderungen
* Jede √Ñnderung, die der Entwickler und/oder Endanwender von IsyFact-Anwendungen wahrnimmt (Schnittstellen√§nderungen, neue Funktionen...)
* Performanceverbesserungen

In diesen F√§llen sollte *kein* Changelogeintrag erstellt werden:

* √Ñnderungen, die *nur* die Dokumentation betreffen (z.B. Rechtschreibfehler)
* √Ñnderungen, die *nur* Entwickler der IsyFact adressieren (z.B. Refactoring, Unit-Tests)
* Fix eines Bugs, der durch eine vorherige √Ñnderung im selben Release erzeugt wurde

Folgende Anforderungen gelten f√ºr den Inhalt eines Changelogeintrags:

* Keine Ticketnummern
* Keine Kopie der Ticketbeschreibung
* Kurz und pr√§gnant
* Erl√§utert, was ge√§ndert wurde und wieso es ge√§ndert wurde
* Enth√§lt weniger Implementierungsdetails, sondern vielmehr das Endresultat
* Enth√§lt kurze Migrationsanleitung (falls n√∂tig, ggfs. mit Implementierungsdetails)

*Aufbau*

Der Changelogeintrag sollte wie folgt aufgebaut sein:

. Kurze und pr√§gnante Beschreibung der √Ñnderung
. Migrationsanleitung von einer √§lteren Version der IsyFact auf die aktuelle Version


[[inhalt-projektchangelog]]
==== Projektchangelog

Der Projektchangelog kann komponenten√ºbergreifende Changelogeintr√§ge aufnehmen, wenn folgende Bedingungen erf√ºllt sind:

* Der Changelogeintrag kann nicht einer Komponente zugewiesen werden

und

* Der Changelogeintrag beschreibt eine √Ñnderung, die eine Migrationsanleitung ben√∂tigt

An die Changelogeintrag gelten die in Kapitel <<inhalt-komponentenchangelog>> beschriebenen Anforderungen.
Komponenten√ºbergreifende Eintr√§ge sind dem gekennzeichneten Bereich hinzuzuf√ºgen (vgl. <<listing-projektchangelog_einbindung_komponentenchangelog>>).


//fix Links in Examples
[[AsciiDocRecommendedPractices]]

[[glossar-halloweltbeispiel]]
// end::inhalt[]
